#!/usr/bin/env bash

set -euo pipefail
prefix="[generate ssh key]"
echo

if [ ! -f "$HOME/.ssh/id_ed25519" ]; then
    echo "$prefix Generating ed25519 key..."
    ssh-keygen -t ed25519 -C {{ .email | quote }} -f "$HOME/.ssh/id_ed25519" -N ""
    echo "$prefix SSH key generated at ~/.ssh/id_ed25519"
    echo "$prefix Public key:"
    cat "$HOME/.ssh/id_ed25519.pub"
    echo ""
else
    echo "$prefix SSH key already exists at ~/.ssh/id_ed25519"
fi
